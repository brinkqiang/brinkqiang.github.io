---
title: io_uring
description:
categories:
 - io_uring
tags:
---

io_uring 对比 epoll LT/ET：三种服务模式
假设你是一位餐厅经理，需要管理服务员为客人提供服务。
- epoll LT (水平触发): 细致周到的服务
  - 服务模式: 服务员像贴身管家，不断询问客人是否需要服务，即使客人暂时不需要，也会过一段时间再次询问，确保客人得到周到的照顾。
  - 优点:
保证客人不会被遗漏，即使服务员忘记了之前的询问，也会在下次询问中弥补。
  - 缺点:
服务员花费大量时间重复询问，效率较低。
容易造成资源浪费。

- epoll ET (边缘触发): 高效敏捷的服务
    - 服务模式: 服务员像经验丰富的侍者，只在客人举手示意时才提供服务，并且只服务一次，之后就继续服务其他客人。
    - 优点:
        服务员效率很高，能够同时服务更多客人。
        避免浪费时间。
    - 缺点:
        如果服务员没有及时注意到客人的示意，或者客人示意后没有立即得到服务，就可能导致客人不满。
- io_uring: 智能化的服务系统
    - 服务模式: 
    餐厅配备了智能化的服务系统，客人可以通过按钮或语音呼叫服务员，服务员则通过系统接收客人的请求，并根据请求的优先级和紧急程度进行处理。
    - 优点:
    结合了 LT 和 ET 的优点，既保证了服务质量，又提高了效率。
    服务员只需关注服务系统，无需浪费时间重复询问或担心错过客人的请求。
    支持更丰富的服务类型，例如点餐、加水、结账等等，而 epoll 主要用于服务客人的用餐需求。

- 对比总结:

| 模式     | 优点                                                                                                             | 缺点                                                                                                   |
| -------- | ---------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------ |
| epoll/LT | 保证服务质量，不会遗漏客人需求。服务员持续关注客人状态，即使错过请求，也会在下一次询问时弥补。                   | 效率低，浪费资源。服务员需要频繁询问客人，占用大量时间和系统资源。                                     |
| epoll/ET | 效率高。服务员只在客人明确示意时才提供服务，避免浪费时间。                                                       | 容易遗漏客人需求。如果服务员没有及时注意到客人的示意，或客人示意后没有立即得到服务，可能导致客人不满。 |
| io_uring | 兼顾服务质量和效率，支持更丰富的服务类型。客人通过系统提交请求，服务员根据优先级和紧急程度处理，避免遗漏和浪费。 | 学习曲线略陡峭，需要一定的技术门槛。API 相对复杂，需要开发者理解异步编程模型。                         |
